define(["backbone","jquery","collections/carts","views/finishcart","views/prints"],function(e,t,n,r,i){var s=e.View.extend({el:"#CustomerRegistrationForm",template:_.template(t("#customerForm").html()),productListing:t("#ProductListing"),events:{"click .submit":"submit","click .edit":"edit"},render:function(){this.$el.show();var e=this.template();this.$el.html(e)},edit:function(e){e.preventDefault(),this.productListing.show(),this.$el.hide()},submit:function(e){e.preventDefault(),t("button .submit").attr("disabled","disabled"),t.fn.serializeObject=function(){var e={},n=this.serializeArray();return t.each(n,function(){e[this.name]!==undefined?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};var r=t(this.el).find("form").serializeObject();this.model.set(r),this.model.url=function(){return"../../../ipad/b/api/submit/"};var s=this;this.model.save({},{success:function(e,n){s.save(n.id),s.productListing.show(),s.$el.hide(),t(".deleteFromCart").remove(),t(".finishCart").remove()},error:function(e,t){console.log("error! "+t)}},this);var o=new i({collection:n});o.render()},save:function(e){var t=this;n.each(function(t){t.set("customer_id",e);var n=new r({model:t})},this)}});return s});